{% extends 'start.html' %}

{% block content %}
<section class="section">
  <h1>Admin Dashboard</h1>

  <!-- Summary Cards -->
  <div class="dashboard-summary" style="display:flex; gap:20px; flex-wrap:wrap; margin-bottom:30px;">
    <div class="card">
      <h3>Work Experience</h3>
      <p>{{ work_count }} items</p>
      <a href="{% url 'list' %}" class="btn">Manage</a>
    </div>
    <div class="card">
      <h3>Education</h3>
      <p>{{ education_count }} items</p>
      <a href="{% url 'about' %}" class="btn">Manage</a>
    </div>
    <div class="card">
      <h3>Services</h3>
      <p>{{ service_count }} items</p>
      <a href="{% url 'about_services' %}" class="btn">Manage</a>
    </div>
    <div class="card">
      <h3>Testimonials</h3>
      <p>{{ testimonial_count }} items</p>
      <a href="{% url 'about_testimonials' %}" class="btn">Manage</a>
    </div>
    <div class="card">
      <h3>Skills</h3>
      <p>{{ skills.count }} items</p>
      <a href="{% url 'skill_list' %}" class="btn">Manage</a>
    </div>
    <div class="card">
      <h3>Contacts</h3>
      <p>{{ contacts.count }} items</p>
      <a href="?download_csv=1" class="btn">Download CSV</a>
    </div>
  </div>
  <div class="card">
      <h3>CVs</h3>
      <p>{{ cvs.count }} items</p>
      <a href="{% url 'cv_list' %}" class="btn">Manage</a>
    </div>
  </div>


  <!-- skill table -->
 <h2>Skills</h2>
<a class="btn" href="{% url 'skill_create' %}">Add New</a>
<table>
  <thead>
    <tr>
      <th>Skill</th>
      <th>Description</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for skill in skills %}
    <tr>
      <td>{{ skill.name }}</td>
      <td>{{ skill.description|truncatewords:20 }}</td>
      <td>
        <a class="btn" href="{% url 'skill_update' skill.id %}">Edit</a>
        <a class="btn" href="{% url 'skill_delete' skill.id %}">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="3">No skills yet.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>


  <!-- Work Experience Table -->
  <h2>Work Experience</h2>
  <a class="btn" href="{% url 'work_create' %}">Add New</a>
  <table>
    <thead>
      <tr>
        <th>Position</th>
        <th>Company</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for work in works %}
      <tr>
        <td>{{ work.position }}</td>
        <td>{{ work.company_name }}</td>
        <td>
          <a class="btn" href="{% url 'work_update' work.id %}">Edit</a>
          <a class="btn" href="{% url 'work_delete' work.id %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="3">No work experience yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Education Table -->
  <h2>Education</h2>
  <a class="btn" href="{% url 'education_create' %}">Add New</a>
  <table>
    <thead>
      <tr>
        <th>Degree</th>
        <th>Institution</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for edu in educations %}
      <tr>
        <td>{{ edu.degree }}</td>
        <td>{{ edu.institution }}</td>
        <td>
          <a class="btn" href="{% url 'education_update' edu.id %}">Edit</a>
          <a class="btn" href="{% url 'education_delete' edu.id %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="3">No education records yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Services Table -->
  <h2>Services</h2>
  <a class="btn" href="{% url 'service_create' %}">Add New</a>
  <table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for service in services %}
      <tr>
        <td>{{ service.title }}</td>
        <td>{{ service.description|truncatewords:15 }}</td>
        <td>
          <a class="btn" href="{% url 'service_update' service.id %}">Edit</a>
          <a class="btn" href="{% url 'service_delete' service.id %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="3">No services yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>


  <!-- Testimonials Table -->
  <h2>Testimonials</h2>
  <a class="btn" href="{% url 'testimonial_create' %}">Add New</a>
  <table>
    <thead>
      <tr>
        <th>Client</th>
        <th>Feedback</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for test in testimonials %}
      <tr>
        <td>{{ test.client_name }}</td>
        <td>{{ test.feedback|truncatewords:20 }}</td>
        <td>
          <a class="btn" href="{% url 'testimonial_update' test.id %}">Edit</a>
          <a class="btn" href="{% url 'testimonial_delete' test.id %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="3">No testimonials yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>


  <!-- Contacts Table -->
  <h2>Contact Messages</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Message</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for contact in contacts %}
      <tr>
        <td>{{ contact.name }}</td>
        <td>{{ contact.email }}</td>
        <td>{{ contact.message|truncatewords:15 }}</td>
        <td>
          <a class="btn" href="?delete={{ contact.id }}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">No contacts yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>


   <!-- CV Table -->
  <h2>CVs</h2>
  <a class="btn" href="{% url 'cv_create' %}">Add New</a>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Created At</th>
        <th>File</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for cv in cvs %}
      <tr>
        <td>{{ cv.name }}</td>
        <td>{{ cv.created_at|date:"Y-m-d H:i" }}</td>
        <td>
          {% if cv.file %}
            <a href="{{ cv.file.url }}" target="_blank">Download</a>
          {% else %}
            N/A
          {% endif %}
        </td>
        <td>
          <a class="btn" href="{% url 'cv_update' cv.pk %}">Edit</a>
          <a class="btn" href="{% url 'cv_delete' cv.pk %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">No CVs yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>

</section>
{% endblock %}
